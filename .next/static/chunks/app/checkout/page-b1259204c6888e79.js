(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{679:(e,t,s)=>{Promise.resolve().then(s.bind(s,1035))},1035:(e,t,s)=>{"use strict";s.d(t,{default:()=>j});var r=s(5155),i=s(2115),a=s(8206),d=s(4511),n=s(2171),l=s(6185),c=s(1517),o=s(6331),m=s(7213),u=s(4539),x=s(5774);let p=(0,d.c)("pk_test_your_stripe_publishable_key"),h=()=>{let e=(0,a.useStripe)(),t=(0,a.useElements)(),{total:s,items:d,clearCart:x}=(0,m._)(),{toast:p}=(0,u.dj)(),[h,f]=(0,i.useState)(!1),j=async s=>{if(s.preventDefault(),e&&t){f(!0);try{let{error:s}=await e.confirmPayment({elements:t,confirmParams:{return_url:"".concat(window.location.origin,"/order-confirmation")}});s?p({title:"Payment Failed",description:s.message,variant:"destructive"}):(p({title:"Payment Successful",description:"Thank you for your purchase!"}),x())}catch(e){p({title:"Payment Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{f(!1)}}};return(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsx)(l.aR,{children:(0,r.jsx)(l.ZB,{"data-testid":"text-order-summary",children:"Order Summary"})}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[d.map(e=>(0,r.jsxs)("div",{className:"flex justify-between","data-testid":"order-item-".concat(e.product.id),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium","data-testid":"text-item-name-".concat(e.product.id),children:e.product.name}),(0,r.jsxs)("p",{className:"text-sm text-muted","data-testid":"text-item-quantity-".concat(e.product.id),children:["Qty: ",e.quantity]})]}),(0,r.jsxs)("p",{className:"font-medium","data-testid":"text-item-total-".concat(e.product.id),children:["$",(parseFloat(e.product.price)*e.quantity).toFixed(2)]})]},e.product.id)),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{"data-testid":"text-checkout-total",children:["$",s.toFixed(2)]})]})]})})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsx)(l.aR,{children:(0,r.jsx)(l.ZB,{"data-testid":"text-payment-details",children:"Payment Details"})}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Shipping Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"firstName",children:"First Name"}),(0,r.jsx)(c.p,{id:"firstName","data-testid":"input-first-name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"lastName",children:"Last Name"}),(0,r.jsx)(c.p,{id:"lastName","data-testid":"input-last-name",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(c.p,{id:"email",type:"email","data-testid":"input-email",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"address",children:"Address"}),(0,r.jsx)(c.p,{id:"address","data-testid":"input-address",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"city",children:"City"}),(0,r.jsx)(c.p,{id:"city","data-testid":"input-city",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"state",children:"State"}),(0,r.jsx)(c.p,{id:"state","data-testid":"input-state",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"zip",children:"ZIP Code"}),(0,r.jsx)(c.p,{id:"zip","data-testid":"input-zip",required:!0})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Payment Information"}),(0,r.jsx)(a.PaymentElement,{})]}),(0,r.jsx)(n.$,{type:"submit",className:"w-full bg-accent hover:bg-green-600",disabled:!e||h,"data-testid":"button-complete-payment",children:h?"Processing...":"Complete Payment - $".concat(s.toFixed(2))})]})})]})})]})},f=()=>{let{total:e,items:t,clearCart:s}=(0,m._)(),{toast:a}=(0,u.dj)(),[d,x]=(0,i.useState)(!1),p=async e=>{e.preventDefault(),x(!0),setTimeout(()=>{a({title:"Demo Payment Successful!",description:"This is a demo payment. In production, this would process through Stripe."}),s(),x(!1)},2e3)};return(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsx)(l.aR,{children:(0,r.jsx)(l.ZB,{"data-testid":"text-order-summary",children:"Order Summary"})}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[t.map(e=>(0,r.jsxs)("div",{className:"flex justify-between","data-testid":"order-item-".concat(e.product.id),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium","data-testid":"text-item-name-".concat(e.product.id),children:e.product.name}),(0,r.jsxs)("p",{className:"text-sm text-muted","data-testid":"text-item-quantity-".concat(e.product.id),children:["Qty: ",e.quantity]})]}),(0,r.jsxs)("p",{className:"font-medium","data-testid":"text-item-total-".concat(e.product.id),children:["$",(parseFloat(e.product.price)*e.quantity).toFixed(2)]})]},e.product.id)),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{"data-testid":"text-checkout-total",children:["$",e.toFixed(2)]})]})]})})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsx)(l.aR,{children:(0,r.jsx)(l.ZB,{"data-testid":"text-payment-details",children:"Demo Payment Details"})}),(0,r.jsxs)(l.Wu,{children:[(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Demo Mode Active"}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-yellow-700",children:[(0,r.jsx)("p",{children:"This is a demo payment form. Use any test card details:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside mt-2",children:[(0,r.jsx)("li",{children:"Card: 4242 4242 4242 4242"}),(0,r.jsx)("li",{children:"Expiry: Any future date"}),(0,r.jsx)("li",{children:"CVC: Any 3 digits"})]})]})]})})}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Shipping Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"firstName",children:"First Name"}),(0,r.jsx)(c.p,{id:"firstName","data-testid":"input-first-name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"lastName",children:"Last Name"}),(0,r.jsx)(c.p,{id:"lastName","data-testid":"input-last-name",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(c.p,{id:"email",type:"email","data-testid":"input-email",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"address",children:"Address"}),(0,r.jsx)(c.p,{id:"address","data-testid":"input-address",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"city",children:"City"}),(0,r.jsx)(c.p,{id:"city","data-testid":"input-city",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"state",children:"State"}),(0,r.jsx)(c.p,{id:"state","data-testid":"input-state",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"zip",children:"ZIP Code"}),(0,r.jsx)(c.p,{id:"zip","data-testid":"input-zip",required:!0})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Payment Information"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"cardNumber",children:"Card Number"}),(0,r.jsx)(c.p,{id:"cardNumber",placeholder:"4242 4242 4242 4242",defaultValue:"4242 4242 4242 4242",disabled:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"expiry",children:"Expiry Date"}),(0,r.jsx)(c.p,{id:"expiry",placeholder:"MM/YY",defaultValue:"12/25",disabled:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"cvc",children:"CVC"}),(0,r.jsx)(c.p,{id:"cvc",placeholder:"123",defaultValue:"123",disabled:!0})]})]})]}),(0,r.jsx)(n.$,{type:"submit",className:"w-full bg-accent hover:bg-green-600",disabled:d,"data-testid":"button-complete-payment",children:d?"Processing Demo Payment...":"Complete Demo Payment - $".concat(e.toFixed(2))})]})]})]})})]})};function j(){let{total:e,items:t}=(0,m._)(),[s,d]=(0,i.useState)(""),[n,l]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{e>0&&(0,x.AT)("POST","/api/create-payment-intent",{amount:e}).then(e=>e.json()).then(e=>{e.demo?(l(!0),d("demo")):(l(!1),d(e.clientSecret))}).catch(e=>{console.error("Error creating payment intent:",e),d("error")})},[e]),0===t.length)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-primary mb-4",children:"No items in cart"}),(0,r.jsx)("p",{className:"text-muted",children:"Please add items to your cart before checking out."})]})}):s?"error"===s?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Payment Setup Error"}),(0,r.jsx)("p",{className:"text-muted",children:"Unable to initialize payment. Please try again later."})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-primary mb-8","data-testid":"text-checkout-title",children:["Checkout ",n&&"- Demo Mode"]}),n?(0,r.jsx)(f,{}):p?(0,r.jsx)(a.Elements,{stripe:p,options:{clientSecret:s},children:(0,r.jsx)(h,{})}):(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Stripe Not Configured"}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-yellow-700",children:[(0,r.jsx)("p",{children:"Stripe payment processing is not configured. To enable payments:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside mt-2",children:[(0,r.jsx)("li",{children:"Set VITE_STRIPE_PUBLIC_KEY in environment variables"}),(0,r.jsx)("li",{children:"Configure Stripe keys for payment processing"})]})]})]})})})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full","aria-label":"Loading"})})}},1517:(e,t,s)=>{"use strict";s.d(t,{p:()=>d});var r=s(5155),i=s(2115),a=s(8456);let d=i.forwardRef((e,t)=>{let{className:s,type:i,...d}=e;return(0,r.jsx)("input",{type:i,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...d})});d.displayName="Input"},2171:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var r=s(5155),i=s(2115),a=s(2467),d=s(3101),n=s(8456);let l=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:s,variant:i,size:d,asChild:c=!1,...o}=e,m=c?a.DX:"button";return(0,r.jsx)(m,{className:(0,n.cn)(l({variant:i,size:d,className:s})),ref:t,...o})});c.displayName="Button"},4539:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var r=s(2115);let i=0,a=new Map,d=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},n=[],l={toasts:[]};function c(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?d(s):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),n.forEach(e=>{e(l)})}function o(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(l);return r.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5774:(e,t,s)=>{"use strict";async function r(e){if(!e.ok){let t=await e.text()||e.statusText;throw Error("".concat(e.status,": ").concat(t))}}async function i(e,t,s){let i=await fetch(t,{method:e,headers:s?{"Content-Type":"application/json"}:{},body:s?JSON.stringify(s):void 0,credentials:"include"});return await r(i),i}s.d(t,{AT:()=>i}),new(s(4852)).E({defaultOptions:{queries:{queryFn:(e=>{let{on401:t}=e;return async e=>{let{queryKey:s}=e,i=await fetch(s.join("/"),{credentials:"include"});return"returnNull"===t&&401===i.status?null:(await r(i),await i.json())}})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}})},6185:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>c,ZB:()=>l,Zp:()=>d,aR:()=>n});var r=s(5155),i=s(2115),a=s(8456);let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});d.displayName="Card";let n=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...i})});n.displayName="CardHeader";let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});l.displayName="CardTitle",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...i})}).displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...i})});c.displayName="CardContent",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...i})}).displayName="CardFooter"},6331:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var r=s(5155),i=s(2115),a=s(489),d=s(3101),n=s(8456);let l=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(a.b,{ref:t,className:(0,n.cn)(l(),s),...i})});c.displayName=a.b.displayName},7213:(e,t,s)=>{"use strict";s.d(t,{CartProvider:()=>n,_:()=>d});var r=s(5155),i=s(2115);let a=(0,i.createContext)(void 0),d=()=>{let e=(0,i.useContext)(a);if(!e)throw Error("useCart must be used within a CartProvider");return e},n=e=>{let{children:t}=e,[s,d]=(0,i.useState)([]),[n,l]=(0,i.useState)(!1),[c,o]=(0,i.useState)(!1),[m,u]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{d(JSON.parse(e))}catch(e){console.error("Error loading cart from localStorage:",e)}},[]),(0,i.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(s))},[s]),(0,i.useEffect)(()=>{if(c){let e=setTimeout(()=>{o(!1),u("")},3e3);return()=>clearTimeout(e)}},[c]);let x=e=>{d(t=>t.filter(t=>t.product.id!==e))},p=s.reduce((e,t)=>e+t.quantity,0),h=s.reduce((e,t)=>e+parseFloat(t.product.price)*t.quantity,0);return(0,r.jsx)(a.Provider,{value:{items:s,itemCount:p,total:h,addItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;d(s=>s.find(t=>t.product.id===e.id)?s.map(s=>s.product.id===e.id?{...s,quantity:s.quantity+t}:s):[...s,{product:e,quantity:t}]),u("".concat(e.name," added to cart!")),o(!0)},removeItem:x,updateQuantity:(e,t)=>{if(t<=0)return void x(e);d(s=>s.map(s=>s.product.id===e?{...s,quantity:t}:s))},clearCart:()=>{d([])},isOpen:n,openCart:()=>l(!0),closeCart:()=>l(!1),showNotification:c,notificationMessage:m},children:t})}},8456:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a});var r=s(2821),i=s(5889);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,r.$)(t))}}},e=>{e.O(0,[909,796,241,688,441,255,358],()=>e(e.s=679)),_N_E=e.O()}]);